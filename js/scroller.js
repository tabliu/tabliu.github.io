(function(){var n,t,r,i,e,l,o,u,c,a,s,f,h,w,d=function(n){return"string"==typeof n||n instanceof String};r=null,c=function(){var n;return null!=(n=document.scrollingElement)?n:document.body},a=function(n){return n?n<0?-1:1:0},h={x:{axisName:"scrollLeft",max:"scrollWidth",viewSize:"clientWidth"},y:{axisName:"scrollTop",max:"scrollHeight",viewSize:"clientHeight"}},u=function(n,t,r){var i;return d(r)?"viewSize"===(i=r)&&n===c()?"x"===t?window.innerWidth:window.innerHeight:n[h[t][i]]:r},f=function(n,t,r){var i,e;return e=n[i=h[t].axisName],n[i]+=r,n[i]!==e},w=function(n,t){var r,i;return"hidden"!==(r=window.getComputedStyle(n)).getPropertyValue("overflow-"+t)&&("hidden"!==(i=r.getPropertyValue("visibility"))&&"collapse"!==i&&"none"!==r.getPropertyValue("display"))},e=function(n,t,r,i){var e;return e=i*u(n,t,r)||-1,e=a(e),f(n,t,e)&&f(n,t,-e)},s=function(n,t,r,i){return null==t&&(t="y"),null==r&&(r=1),null==i&&(i=1),e(n,t,r,i)&&w(n,t)},l=function(n,t,r,i){for(var e;n!==c()&&!s(n,t,r,i);)n=null!=(e=DomUtils.getContainingElement(n))?e:c();return n},o=function(n){var t,r,i,l,u,a;if(null==n&&(n=c()),e(n,"y",1,1)||e(n,"y",-1,1))return n;for((r=(r=function(){var r,i,e,l;for(l=[],r=0,i=(e=n.children).length;r<i;r++)t=e[r],l.push({element:t,rect:DomUtils.getVisibleClientRect(t)});return l}()).filter(function(n){return n.rect})).map(function(n){return n.area=n.rect.width*n.rect.height}),l=0,u=(a=r.sort(function(n,t){return t.area-n.area})).length;l<u;l++)if(t=a[l],i=o(t.element))return i;return null},i=function(n){var t;if((t=r.getBoundingClientRect()).bottom<0||t.top>window.innerHeight||t.right<0||t.left>window.innerWidth)return r=n},n={init:function(){return this.time=0,this.lastEvent=null,this.keyIsDown=!1,1},wouldNotInitiateScroll:function(){var n;return null!=(n=this.lastEvent)?n.repeat:void 0},minCalibration:.5,maxCalibration:1.6,calibrationBoundary:150,scroll:function(n,t,r,e){var l,o,u,c,s,h,w,d,m,y,g;if((null==e&&(e=!0),r)&&(null==(w=this.lastEvent)||!w.repeat))return l=++this.time,g=this,s=function(){return g.time===l&&g.keyIsDown},d=a(r),r=Math.abs(r),c=Math.max(100,20*Math.log(r)),m=0,y=0,u=1,h=null,o=function(e){return function(l){var a,w;return null==h&&(h=l),l===h?requestAnimationFrame(o):(y+=w=l-h,h=l,s()&&75<=y&&e.minCalibration<=u&&u<=e.maxCalibration&&(1.05*u*r<e.calibrationBoundary&&(u*=1.05),e.calibrationBoundary<.95*u*r&&(u*=.95)),a=Math.ceil(r*(w/c)*u),(a=s()?a:Math.max(0,Math.min(a,r-m)))&&f(n,t,d*a)?(m+=a,requestAnimationFrame(o)):i(n))}}(this),e||++this.time,requestAnimationFrame(o)}},t={init:function(){return n.init()},scrollBy:function(t,i,e,a){var s,f;if(null==e&&(e=1),null==a&&(a=!0),!c()&&i instanceof Number)"x"===t?window.scrollBy(i,0):window.scrollBy(0,i);else if(r||(r=c()&&o()||c()),r)return n.wouldNotInitiateScroll()?void 0:(s=l(r,t,i,e),f=e*u(s,t,i),n.scroll(s,t,f,a))},scrollTo:function(t,i){var e,a;if(r||(r=c()&&o()||c()),r)return a=l(r,t,i,1),e=u(a,t,i)-a[h[t].axisName],n.scroll(a,t,e)},isScrollableElement:function(n){return r||(r=c()&&o()||c()),n!==r&&s(n)},scrollIntoView:function(t){var i,e,u;if(r||(r=c()&&o()),null!=(e=null!=(u=t.getClientRects())?u[0]:void 0)){if(e.bottom<0?(i=e.bottom-Math.min(e.height,window.innerHeight),t=l(t,"y",i,1),n.scroll(t,"y",i,!1)):window.innerHeight<e.top&&(i=e.top+Math.min(e.height-window.innerHeight,0),t=l(t,"y",i,1),n.scroll(t,"y",i,!1)),e.right<0)return i=e.right-Math.min(e.width,window.innerWidth),t=l(t,"x",i,1),n.scroll(t,"x",i,!1);if(window.innerWidth<e.left)return i=e.left+Math.min(e.width-window.innerWidth,0),t=l(t,"x",i,1),n.scroll(t,"x",i,!1)}}},("undefined"!=typeof exports&&null!==exports?exports:window).Scroller=t}).call(this);var scrollStepSize=60;$.extend(window,{scrollToBottom:function(){return Scroller.scrollTo("y","max")},scrollToTop:function(n){return Scroller.scrollTo("y",(n-1)*scrollStepSize)},scrollUp:function(n){return Scroller.scrollBy("y",-1*scrollStepSize*n)},scrollDown:function(n){return Scroller.scrollBy("y",scrollStepSize*n)},scrollPageUp:function(n){return Scroller.scrollBy("y","viewSize",-.5*n)},scrollPageDown:function(n){return Scroller.scrollBy("y","viewSize",.5*n)},scrollFullPageUp:function(n){return Scroller.scrollBy("y","viewSize",-1*n)},scrollFullPageDown:function(n){return Scroller.scrollBy("y","viewSize",1*n)}});