<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="sogou_site_verification" content="5rKcZFfjtl"><meta name="360-site-verification" content="41ba3d1b4d5a1406eb63765d4c990146"><meta name="author" content="Tabliu"><meta name="keywords" content="大踏步走, 前端开发, 前端网站, javascript, vue"><meta name="description" content="一名80后前端开发者，专注前端开发和用户体验。天资愚钝，五体不勤，只能不停大踏步走。"><link rel="alternative" href="/atom.xml" title="大踏步走" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><title>Vue 学习笔记(2) - Vue-cli脚手架 - 大踏步走</title><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="../js/jquery-3.1.1.min.js"></script><script src="../js/fancybox/jquery.fancybox.min.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0e8fa2fbb74e1bdfda05935cbf42c755";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body style="opacity:0"><header class="head"><img class="head-avatar u-fl" src="/img/logo.png" alt="tabliu"><h1 class="head-title u-fl"><a href="/" title="大踏步走">大踏步走</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/">Home</a></li><li class="head-nav__item"><a class="head-nav__link" href="/archives">Writing</a></li><li class="head-nav__item"><a class="head-nav__link" href="https://github.com/tabliu/">Project</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">About</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time class="post__time" datetime="2018-09-07T02:30:00.000Z">September 7, 2018</time><h1 class="post__title"><a href="/post/vue-learning-02.html">Vue 学习笔记(2) - Vue-cli脚手架</a></h1><div class="post__main echo"><blockquote><p>Vue 学习笔记和代码记录。</p></blockquote><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><blockquote><p>Vue 官方提供的<code>CLI</code>，为单页面应用 (SPA) 快速搭建繁杂的脚手架。</p></blockquote><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul><li>脚手架是通过<code>webpack</code>搭建的开发环境；</li><li>使用<code>ES6</code>语法；</li><li>打包和压缩为一个<code>js</code>文件；</li><li>项目文件在环境中编译，而不是浏览器；</li><li>实现页面自动刷新。</li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><pre class="language-js"><code class="language-js">index<span class="token punctuation">.</span>html <span class="token operator">-</span><span class="token operator">></span> main<span class="token punctuation">.</span>js <span class="token operator">-</span><span class="token operator">></span> App<span class="token punctuation">.</span>vue
</code></pre><h2 id="组件传值"><a href="#组件传值" class="headerlink" title="组件传值"></a>组件传值</h2><h3 id="父传子：props"><a href="#父传子：props" class="headerlink" title="父传子：props"></a>父传子：<code>props</code></h3><ul><li>传值：<code>Number</code>、<code>String</code>、<code>Boolean</code></li><li>传引用：<code>Array</code>、<code>Object</code></li></ul><p>如何传引用值？</p><h3 id="子传父：-emit"><a href="#子传父：-emit" class="headerlink" title="子传父：$emit"></a>子传父：<code>$emit</code></h3><p>引用多个子组件，相同的方法相互影响如何避免？</p><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h3 id="生命周期的作用"><a href="#生命周期的作用" class="headerlink" title="生命周期的作用"></a>生命周期的作用</h3><ul><li>了解过程，方便找错误；</li><li>了解需求，来确定实现过程定义在哪个环节；</li></ul><h3 id="生命周期的过程"><a href="#生命周期的过程" class="headerlink" title="生命周期的过程"></a>生命周期的过程</h3><ul><li><code>beforCreate</code>: 组件实例化之前执行的函数，预加载的执行；</li><li><code>created</code>: 组件实例化完毕但页面还未显示，常用作请求数据；结束<code>beforeCreate</code>的动作；</li><li><code>beforeMount</code>：组件挂载前状态，页面仍未展示，但虚拟 Dom 已配置，挂载模版之前的操作；</li><li><code>mounted</code>：组件挂载完毕，页面 dom 生成，加载完毕；</li><li><code>beforeUpdate</code>：组件更新前，页面仍未更新，需要调用的钩子函数</li><li><code>updated</code>：组件更新后，此方法一旦执行，页面就显示。需要发生变化而调用的钩子函数；</li><li><code>beforeDestory</code>：组件销毁前执行的钩子函数方法；</li><li><code>destoryed</code>：组件销毁后的钩子函数方法；</li></ul><h2 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h2><h3 id="路由参数的作用"><a href="#路由参数的作用" class="headerlink" title="路由参数的作用"></a>路由参数的作用</h3><blockquote><p>使用同一套模版，根据传过来的不同 ID 展示不同内容。</p></blockquote><h3 id="路由的实例化"><a href="#路由的实例化" class="headerlink" title="路由的实例化"></a>路由的实例化</h3><p>过程：</p><ul><li>安装路由：<code>npm install vue-router --save</code>；</li><li>引入路由：<code>import VueRouter form &#39;vue-router&#39;</code>；</li><li>使用路由：<code>Vue.use(VueRouter)</code></li><li>路由实例化：路由实例化有两种方式。</li></ul><p>第一种：直接实例化：</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">'routerName'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> RouterName
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> <span class="token string">'history'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>第二种：引入实例化：</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">'routerName'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> RouterName
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> routes<span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> <span class="token string">'history'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ul><li>路由挂载：</li></ul><pre class="language-js"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  router<span class="token punctuation">,</span>
  render<span class="token punctuation">:</span> h <span class="token operator">=</span><span class="token operator">></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ul><li>路由使用：路由使用可以有不同种方法：</li></ul><p>第一种：使用<code>path</code>属性。</p><pre class="language-html"><code class="language-html">const router = new VueRouter({
  routes : [
    {
      path: "/",
      name: "routerName",
      component: RouterName
    }
  ],
  mode: "history"
})

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/routerName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>菜单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span>
</code></pre><p>第二种：使用<code>path</code>属性结合动态属性绑定。</p><pre class="language-html"><code class="language-html">const router = new VueRouter({
  routes : [
    {
      path: "/",
      name: "routerName",
      component: RouterName
    }
  ],
  mode: "history"
})

export default {
  data () {
    return {
      routerLink : "/routerName"
    }
  }
}


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ routerLink }<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>菜单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span>
</code></pre><p>第三种：使用<code>name</code>属性，需要结合属性绑定来使用；</p><pre class="language-html"><code class="language-html">const router = new VueRouter({
  routes : [
    {
      path: "/",
      name: "routerName",
      component: RouterName
    }
  ],
  mode: "history"
})

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ name: <span class="token punctuation">'</span>routerName<span class="token punctuation">'</span> }<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>菜单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span>
</code></pre><p>第四种：动态改变路由跳转。</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-success<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>goToRouter<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Bingo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes <span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">"routerName"</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> RouterName
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> <span class="token string">"history"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    goToRouter <span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// 跳转到上一次访问链接</span>
      <span class="token comment" spellcheck="true">//this.$router.go(-1);</span>

      <span class="token comment" spellcheck="true">// 跳转到指定的地址</span>
      <span class="token comment" spellcheck="true">//this.$router.replace("/admin");</span>

      <span class="token comment" spellcheck="true">// 跳转到指定的名称</span>
      <span class="token comment" spellcheck="true">// this.$router.replace({name: "menu"});</span>

      <span class="token comment" spellcheck="true">// 通过push进行跳转</span>
      <span class="token comment" spellcheck="true">// this.$router.push({name: "menu"});</span>
      <span class="token comment" spellcheck="true">//this.$router.push("/admin");</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><h2 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h2><blockquote><p><code>vue-router</code> 提供的导航守卫主要用来通过跳转或取消的方式守卫导航。有多种机会植入路由导航过程中：全局的, 单个路由独享的, 或者组件级的。</p></blockquote><p>以上内容来自<a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%AE%88%E5%8D%AB" target="_blank" rel="noopener">官网</a>。</p><h3 id="全局守卫"><a href="#全局守卫" class="headerlink" title="全局守卫"></a>全局守卫</h3><p>可以使用 <code>router.beforeEach</code> 注册一个全局前置守卫。</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>参数说明：</p><ul><li><code>to</code>：值为<code>router</code>，即将要进入的路由；</li><li><code>from</code>：值为<code>router</code>，当前导航正要离开的路由；</li><li><code>next</code>：值为<code>function</code>，一个回调函数</li></ul><pre class="language-js"><code class="language-js">router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// 判断当前页面是否是注册或者登录页面</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/login'</span> <span class="token operator">||</span> to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/register'</span> <span class="token operator">||</span> to<span class="token punctuation">.</span>path <span class="token operator">==</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'请先登录！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="全局后置钩子"><a href="#全局后置钩子" class="headerlink" title="全局后置钩子"></a>全局后置钩子</h3><blockquote><p>和守卫不同的是，这些钩子不会接受 next 函数也不会改变导航本身。</p></blockquote><pre class="language-js"><code class="language-js"><span class="token comment" spellcheck="true">//后置钩子</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'after each!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id="路由独享守卫"><a href="#路由独享守卫" class="headerlink" title="路由独享守卫"></a>路由独享守卫</h3><blockquote><p>在路由配置上直接定义 <code>beforeEnter</code> 守卫。</p></blockquote><pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token string">"/admin"</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span>
  component <span class="token punctuation">:</span> Admin
  beforeEnter<span class="token punctuation">:</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//路由独享守卫</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"非登录状态无法登录，请先登录！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="组件内守卫"><a href="#组件内守卫" class="headerlink" title="组件内守卫"></a>组件内守卫</h3><blockquote><p>在路由组件内直接定义以下路由导航守卫。</p></blockquote><p>共有三种模式：</p><p>第一种模式： <code>beforeRouteEnter</code></p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'tabliu'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span>vm <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello '</span> <span class="token operator">+</span> vm<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>说明：</p><ul><li>在渲染该组件的对应路由被 <code>confirm</code> 前调用；</li><li>不！能！获取组件实例 <code>this</code>；</li><li>因为当守卫执行前，组件实例还没被创建。</li></ul><p>第二种模式：<code>beforeRouteLeave</code></p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'tabliu'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'确定要离开吗？'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>说明：</p><ul><li>导航离开该组件的对应路由时调用；</li><li>可以访问组件实例 <code>this</code>。</li></ul><p>第三种模式：<code>beforeRouteUpdate</code> (2.2 新增)</p><pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">beforeRouteUpdate</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'确定要改变吗？'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>说明：</p><ul><li>在当前路由改变，但是该组件被复用时调用；</li><li>举例来说，对于一个带有动态参数的路径 <code>/foo/:id</code>，在 <code>/foo/1</code> 和 <code>/foo/2</code> 之间跳转的时候，由于会渲染同样的 <code>Foo</code> 组件，因此组件实例会被复用，而这个钩子就会在这个情况下被调用；</li><li>可以访问组件实例 <code>this</code>。</li></ul><h3 id="完整的导航解析流程"><a href="#完整的导航解析流程" class="headerlink" title="完整的导航解析流程"></a>完整的导航解析流程</h3><ul><li>导航被触发；</li><li>在失活的组件里调用离开守卫；</li><li>调用全局的 <code>beforeEach</code> 守卫；</li><li>在重用的组件里调用 <code>beforeRouteUpdate</code> 守卫 (2.2+)；</li><li>在路由配置里调用 <code>beforeEnter；</code></li><li>解析异步路由组件；</li><li>在被激活的组件里调用 <code>beforeRouteEnter；</code></li><li>调用全局的 <code>beforeResolve</code> 守卫 (2.5+)；</li><li>导航被确认；</li><li>调用全局的 <code>afterEach</code> 钩子；</li><li>触发 <code>DOM</code> 更新；</li><li>用创建好的实例调用 <code>beforeRouteEnter</code> 守卫中传给 <code>next</code> 的回调函数。</li></ul></div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/code/">code</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/note/">note</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/vue/">vue</a></li></ul></footer></article></main><footer class="foot"><div class="foot-copy">Copyright &copy; 2015-2018 <a href="/" title="大踏步走">Tabliu</a>theme by <a href="https://github.com/ochukai/hexo-theme-ochuunn/">ochuunn</a><a href="http://www.miibeian.gov.cn/" target="_blank">京ICP备13042587号-1</a></div></footer><script src="../js/scroller.js"></script><script src="../js/main.js"></script><script>!function(){var c="http:"==document.location.protocol?"http://js.passport.qihucdn.com/11.0.1.js?d8ae537cce9dbebc797b803cec7ed6ac":"https://jspassport.ssl.qhimg.com/11.0.1.js?d8ae537cce9dbebc797b803cec7ed6ac";document.write('<script src="'+c+'" id="sozz"><\/script>')}()</script></body></html>