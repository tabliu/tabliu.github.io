<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="sogou_site_verification" content="5rKcZFfjtl"><meta name="360-site-verification" content="41ba3d1b4d5a1406eb63765d4c990146"><meta name="author" content="Tabliu"><meta name="keywords" content="大踏步走, 前端开发, 前端网站, javascript, vue"><meta name="description" content="一名80后前端开发者，专注前端开发和用户体验。天资愚钝，五体不勤，只能不停大踏步走。"><link rel="alternative" href="/atom.xml" title="大踏步走" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><title>JavaScript学习笔记（10）- 对象 - 大踏步走</title><link rel="stylesheet" href="../../../../css/main.css"><link rel="stylesheet" href="../../../../js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="../../../../js/jquery-3.1.1.min.js"></script><script src="../../../../js/fancybox/jquery.fancybox.min.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?0e8fa2fbb74e1bdfda05935cbf42c755";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body style="opacity:0"><header class="head"><img class="head-avatar u-fl" src="/img/logo.png" alt="tabliu"><h1 class="head-title u-fl"><a href="/" title="大踏步走">大踏步走</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/">Home</a></li><li class="head-nav__item"><a class="head-nav__link" href="/archives">Writing</a></li><li class="head-nav__item"><a class="head-nav__link" href="https://github.com/tabliu/">Project</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">About</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time class="post__time" datetime="2018-07-14T07:50:00.000Z">July 14, 2018</time><h1 class="post__title"><a href="/2018/07/14/js-learning-10/">JavaScript学习笔记（10）- 对象</a></h1><div class="post__main echo"><blockquote><p>JavaScript学习笔记。本笔记是基于在腾讯课堂《<a href="https://ke.qq.com/webcourse/index.html#course_id=231577&amp;term_id=100273169&amp;taid=1464734172022937&amp;vid=a14198i8y2h" target="_blank" rel="noopener">Web前端开发之JavaScript精英课堂【渡一教育】</a>》课程学习过程中记录的一些提纲和关键点。<br>强烈推荐想要进行js入门学习来听听，尤其是前面姬成讲的基础知识点。</p></blockquote><h2 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h2><p>用已学的知识点，请描述下你心目中的对象。</p><p>…</p><p>不要想歪哦，我们说的是<code>Object</code>这个数据类型的对象。</p><h2 id="对象定义"><a href="#对象定义" class="headerlink" title="对象定义"></a>对象定义</h2><blockquote><p>对象是JavaScript的一个基本数据类型，是一种复合值，它将很多值（原始值或者其他对象）聚合在一起，可通过名字访问这些值。<br>即属性的无序集合。</p></blockquote><ul><li>对象是带有属性和方法的特殊数据类型。</li><li>JavaScript 中的所有事物都是对象：字符串、数值、数组、函数…</li><li>JavaScript 允许自定义对象。</li></ul><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> mrDeng <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"MrDeng"</span><span class="token punctuation">,</span>
  age <span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
  sex <span class="token punctuation">:</span> male<span class="token punctuation">,</span>
  health<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  smoke <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am smoking! cool!!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mrDeng<span class="token punctuation">.</span>health <span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  drink <span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am drinking!'</span><span class="token punctuation">)</span>
    mrDeng<span class="token punctuation">.</span>health <span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="对象方法"><a href="#对象方法" class="headerlink" title="对象方法"></a>对象方法</h2><blockquote><p>具有常规属性的四种方法：增、删、改、查。</p></blockquote><h3 id="增"><a href="#增" class="headerlink" title="增"></a>增</h3><p>增加一个对象的属性，就是直接对该属性进行赋值操作，相当于为该对象添加了一个新属性。</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 增</span>
<span class="token keyword">var</span> mrDeng <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
mrDeng<span class="token punctuation">.</span>wife <span class="token operator">=</span> <span class="token string">"xiaoliu"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mrDeng<span class="token punctuation">.</span>wife<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//xiaoliu</span>
</code></pre><h3 id="删"><a href="#删" class="headerlink" title="删"></a>删</h3><p>删除一个对象的属性，需要使用操作符<code>delete</code>后加上属性名进行删除。</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 删</span>
<span class="token keyword">delete</span> mrDeng<span class="token punctuation">.</span>age<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mrDeng<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//undifined</span>
</code></pre><h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><p>修改一个对象的属性，直接通过赋值操作赋予其新的值即可。</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 改</span>
mrDeng<span class="token punctuation">.</span>wife <span class="token operator">=</span> <span class="token string">"xiaozhang"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mrDeng<span class="token punctuation">.</span>wife<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//xiaozhang</span>
</code></pre><h3 id="查"><a href="#查" class="headerlink" title="查"></a>查</h3><p>查询一个对象的属性值。</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 查</span>
mrDeng<span class="token punctuation">.</span>wife <span class="token operator">=</span> <span class="token string">"xiaozhang"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mrDeng<span class="token punctuation">.</span>wife<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//xiaozhang</span>
</code></pre><p>从上面的示例可以看出，增改查都相当容易，只有执行删除的时候，需要使用操作符<code>delete</code>后加上属性名进行删除。</p><p>另外还发现一个问题：如果一个变量没有定义直接打印会报错，但如果直接访问一个没有定义对象的属性是没有报错的，返回<code>undifined</code>，这点很有意思。</p><h2 id="对象创建方法"><a href="#对象创建方法" class="headerlink" title="对象创建方法"></a>对象创建方法</h2><h3 id="对象字面量-plainObject"><a href="#对象字面量-plainObject" class="headerlink" title="对象字面量(plainObject)"></a>对象字面量(plainObject)</h3><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> ojb <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><h3 id="构造函数创建法"><a href="#构造函数创建法" class="headerlink" title="构造函数创建法"></a>构造函数创建法</h3><ul><li>系统自带的构造函数 Object(), Array(), Number(), Boolean(), Date()…</li></ul><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> ojb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Javascript里的对象是所有语言里最灵活的，通过构造函数创建的对象可以灵活定义和修改。</p><p>在<code>Object()</code>前面加个<code>new</code>，变成<code>new Object()</code>的执行，就会真正返回一个对象。通过<code>return</code>返回，拿变量来接收。<br><code>var obj = new Object();</code> 和<code>var ojb = {}</code>这样写区别不大。</p><ul><li>自定义构造函数</li></ul><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> Person <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'lilei'</span><span class="token punctuation">;</span>
</code></pre><p>对象构造函数和常规函数在定义上基本没有区别，为了进行区分，一般规定对象构造函数的命名采用<code>大驼峰式</code>命名规则。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> Car <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'BMW'</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'4900'</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'2400'</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>health <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>run <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>health <span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> car1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        car2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
car1<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>car1<span class="token punctuation">.</span>health<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 99</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>car2<span class="token punctuation">.</span>health<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 100</span>
</code></pre><p>自定义构造函数相当于一个工厂，新建的对象是工厂生产的产品。每一个对象在工厂生产时都赋予了相同属性，但彼此是独立的，没有任何交集。</p><p>在自定义构造函数里，如果对象的属性值是不确定的，每个对象都有不同的属性值，可以引入参数来解决。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> <span class="token number">2018</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> student1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'male'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'lisi'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">'female'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h2><h3 id="构造函数的内部原理"><a href="#构造函数的内部原理" class="headerlink" title="构造函数的内部原理"></a>构造函数的内部原理</h3><p>构造函数的三段式：</p><ul><li>在函数体最前面隐式的加上<code>this = {}</code>；</li><li>执行 <code>this.xxx = xxx</code>；</li><li>隐式的返回<code>this</code>。</li></ul><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//隐式的加上this</span>
  <span class="token comment" spellcheck="true">//var this = {</span>
  <span class="token comment" spellcheck="true">//  name : '',</span>
  <span class="token comment" spellcheck="true">//  age : '',</span>
  <span class="token comment" spellcheck="true">//  sex : '',</span>
  <span class="token comment" spellcheck="true">//  grade : 2018</span>
  <span class="token comment" spellcheck="true">//};</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> <span class="token number">2018</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//return this; 隐式的返回this</span>
<span class="token punctuation">}</span>
</code></pre><p>构造函数的前提是必须在定义的时候加<code>new</code>，有了<code>new</code>，就能产生构造函数的效果。</p><p>下面再看一个例子：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">//var this = {}; 隐式的加上this</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>say <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>say<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//此处的this和外面的this不同</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">//return this; 隐式的返回this</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'xiaozhang'</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// xiaozhang</span>
</code></pre><p>如果想显示的表示出来呢？</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  that<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  that<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>

  <span class="token keyword">return</span> that<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'xiaowang'</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'xiaozhang'</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//Person{...}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//Person{...}</span>
</code></pre><p>通过这种显示的方式引用，也是可以正常返回对象。</p><p>但如果在函数中，显示的通过<code>return</code>返回一个空对象或者非对象的原始值，会是什么结果呢？</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">//return 123</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'xiaowang'</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'xiaozhang'</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>通过浏览器我们可以看到结果：</p><blockquote><p>如果return一个对象值(数组、函数或者对象)，受其影响，返回的也是<code>retrun</code>的对象值；<br>如果return一个原始值是不允许的，返回结果这不受其影响。</p></blockquote><p>综上，<strong><em>通过<code>new</code> 创建的构造函数就不能再返回原始值了</em></strong>。</p><h3 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h3><p>先记住两点：</p><ul><li>原始值是没有属性和方法的，只有原始值数字才是原始值。</li><li>只有对象可以有，通过构造函数创建的对象也可以有属性和方法。包括：<code>new Number()</code>、<code>new String()</code>和<code>new Boolean()</code>。</li></ul><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//数字型对象</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//字符串型对象</span>
<span class="token keyword">var</span> bol <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token string">'true'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//布尔型对象</span>
</code></pre><p>数值型对象也可以参与运算，但运算后就变成原始值了。</p><p><code>undefined</code>和<code>null</code>不可以有属性和方法。</p><p>下面我们看一种情况：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
num<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>根据上面我们了解到的原始值不可能有属性和方法，那<code>num.length</code>输出应该会报错。</p><p>看看输出结果：</p><p><img src="../../../../demo/demo_03.png" alt="输出结果"></p><p>没有报错，而是<code>undefined</code>。<br>如何理解呢？这里就要引入<strong><em>包装类</em></strong>的概念。</p><p>我们说JavaScript是非常灵活的，在执行语句的时候，系统有时候会加入一些自己的思考和判断。</p><p>在原始调用属性或者方法时，本身自己不能有，但会隐式的发生一个过程：在执行<code>num.length = 3;</code>语句时，会隐式的新建一个对象把原始值放进去：<code>new Number(123).length = 3</code>，完成后选择销毁<code>delete</code>。输出语句<code>console.log(num.length)</code>时，系统会重复新建对象的过程<code>console.log(new Number(123).length)</code>，这两个新建的对象是彼此独立的，因为后一个对象没有赋值，所以返回<code>undefined</code>。</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
num<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// new Number(123).length = 3;</span>
<span class="token comment" spellcheck="true">// delete;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// console.log(new Number(123).length);</span>
<span class="token comment" spellcheck="true">// undefined</span>
</code></pre><p>这个隐式的中间环节就是<strong><em>包装类</em></strong>。</p><p>看一个示例：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abcd'</span><span class="token punctuation">;</span>
str<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>咋一看，我们觉得输出的结果是<code>ab</code>，我们分析下过程：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abcd'</span><span class="token punctuation">;</span>
str<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// new String('abcd').length = 2;</span>
<span class="token comment" spellcheck="true">// delete;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>因为新建出来的字符串对象和原<code>str</code>不是同一个对象，所以输出的结果不会受影响，仍然是<code>abcd</code>。</p><p>再看一个例子：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abcd'</span><span class="token punctuation">;</span>
str <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token keyword">typeof</span> str<span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">.</span>sign <span class="token operator">=</span> <span class="token string">"typeof的返回结果可能是String"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span>sign<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>我们分析下：</p><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'abcd'</span><span class="token punctuation">;</span>
str <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//输出'abcd1'</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token keyword">typeof</span> str<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//输出'string'</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">.</span>sign <span class="token operator">=</span> <span class="token string">"typeof的返回结果可能是String"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//包装类 new Sting('abcd').sign = 'xxx'; delete;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span>sign<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//包装类 new String('abcd').sign</span>
</code></pre><p>这个题充满了各种坑，最终结果其实是：<code>undefined</code>。</p><h2 id="课后作业"><a href="#课后作业" class="headerlink" title="课后作业"></a>课后作业</h2><blockquote><p>求任意一个字符串的字节长度。<br>通过<code>string.charCodeAt(str)</code>方法可以判断当前字符位的Unicode码：如果&lt;=255，改字符的长度为1；如果&gt;255，字符长度为2。</p></blockquote><pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// code 1</span>
<span class="token keyword">function</span> bitesLength <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">255</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count <span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      count <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The String "'</span> <span class="token operator">+</span> str <span class="token operator">+</span> <span class="token string">'" length is '</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// code 2</span>
<span class="token keyword">function</span> bitesLength <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> count <span class="token operator">=</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">255</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count <span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The String "'</span> <span class="token operator">+</span> str <span class="token operator">+</span> <span class="token string">'" length is '</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">bitesLength</span><span class="token punctuation">(</span><span class="token string">'abcd 打飞机'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/code/">code</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/javascript/">javascript</a></li><li class="post__tag__item"><a class="post__tag__link" href="/tags/note/">note</a></li></ul></footer></article></main><footer class="foot"><div class="foot-copy">Copyright &copy; 2015-2018 <a href="/" title="大踏步走">Tabliu</a>theme by <a href="https://github.com/ochukai/hexo-theme-ochuunn/">ochuunn</a><a href="http://www.miibeian.gov.cn/" target="_blank">京ICP备13042587号-1</a></div></footer><script src="../../../../js/scroller.js"></script><script src="../../../../js/main.js"></script><script>!function(){var c="http:"==document.location.protocol?"http://js.passport.qihucdn.com/11.0.1.js?d8ae537cce9dbebc797b803cec7ed6ac":"https://jspassport.ssl.qhimg.com/11.0.1.js?d8ae537cce9dbebc797b803cec7ed6ac";document.write('<script src="'+c+'" id="sozz"><\/script>')}()</script></body></html>