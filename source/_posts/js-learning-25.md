---
title: JavaScript学习笔记（25）- 正则表达式入门
date: 2018-11-25 10:10:10
tags:
  - code
  - javascript
  - note
---

## 什么是正则表达式

> 正则表达式（英语：Regular Expression，在代码中常简写为 regex、regexp 或 RE）使用单个字符串来描述、匹配一系列符合某个句法规则的字符串搜索模式。

## 正则表达式的作用

通过上面的定义我们知道，正则表达式是描述了一种字符串匹配的模式，可以用来检查一个字符串是否含有某种子串、将匹配的子串做替换或者从某个字符串中取出符合某个条件的子串等。

简单讲就是用来处理一些复杂的字符串匹配。

## 正则表达式的创建

常见的正则创建方法有两种：字面量和实例化。

### 字面量创建

语法：/正则表达式主体/[修饰符]，修饰符可选。

定义：`var reg = /pattern/[flags]`

实例：

```js
var str = 'no zuo no die';
var reg = /no/ig;
console.log(str.match(reg)); // ['no', 'no']
```

### 实例化定义

语法：new RegExp(正则表达式主体[, 修饰符])，修饰符可选。

定义：`var reg = new RegExp(pattern[, flags])`

实例：

```js
var str = 'no zuo no die';
var reg = new RegExp('no', 'ig');
console.log(str.match(reg)); // ['no', 'no']
```

字面量和实例化创建方法的区别：

1. 字面量创建不能进行字符串拼接，实例创建可以；

```js
var regParam = 'hello';
var reg1 = /regParam/;
var reg2 = new RegExp(regParam + ' world');
console.log(reg1); // /regParam/
console.log(reg2); // /hello world/
```

2. 字面量创建特殊含义的字符不需要转义，实例创建需要转义；

```js
var reg1 = /d/;
var reg2 = /\d/;
var reg3 = /\\d/;
var reg4 = new RegExp('d');
var reg5 = new RegExp('\d');
var reg6 = new RegExp('\\d');
console.log(reg1); // /d/
console.log(reg2); // /\d/
console.log(reg3); // /\\d/
console.log(reg4); // /d/
console.log(reg5); // /d/
console.log(reg6); // /\d/
```

## 正则表达式的特殊字符

上面对比字面量创建方式和实例创建的区别中提到了特殊含义的字符，这些具有特殊含义的字符叫做**元字符**，那我们看看在正则表达式中有哪些元字符。

### 单个元字符

| 特殊字符       | 功能描述 |
| :--------- | :------------------------------------ |
| `^`     | 匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 '^' 字符本身，请使用 `/\^/`。 |
| `\`     | 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如： `/n/` 匹配字符 'n'。`/\n/` 匹配换行符。序列 `/\\/` 匹配 '\'， `/\(/` 匹配 '('。`/a*/`匹配 0 个或者多个 'a'，而 `/a\*/`则匹配的是 'a*'。 |
| `$`     | 匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 '$' 也匹配 '\n' 或 '\r'。要匹配 '$' 字符本身，请使用 `/\$/`。 |
| `*`     | 匹配前面的子表达式零次或多次。要匹配 '*' 字符，请使用 `/\*/`。 |
| `+`     | 匹配前面的子表达式一次或多次。要匹配 '+' 字符，请使用 `/\+/`。 |
| `.`     | 匹配除换行符 \n 之外的任何单字符。要匹配 '.' ，请使用 `/\./`。 |
| `(`     | 标记一个子表达式的开始位置。子表达式可以获取供以后使用。要匹配 '(' 字符，请使用 `/\(/`。 |
| `)`     | 标记一个子表达式的结束位置。子表达式可以获取供以后使用。要匹配 ')' 字符，请使用 `/\)/`。 |
| `[`     | 标记一个中括号表达式的开始。要匹配 '[' 字符，请使用 `/\[/`。 |
| `]`     | 标记一个中括号表达式的结束。要匹配 ']' 字符，请使用 `/\]/`。 |
| `{`     | 标记限定符表达式的开始。要匹配 '{' 字符，请使用 `/\{/`。 |
| `}`     | 标记限定符表达式的开始。要匹配 '}' 字符，请使用 `/\}/`。 |
| `竖`     | 匹配指明多项之间的任意一个选择。要匹配 '竖' 字符，请使用 `/\竖/`。 |
| `?`     | 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 '?' 字符，请使用 `/\?/`。 |

**注**：因 Markdown 表格格式中会将 '|' 匹配为一个单元格，故用汉字竖代替了 '|' 。

### 定位符

> 定位符用来描述字符串或单词的边界，能够将正则表达式固定到行首或行尾。

| 特殊字符       | 功能描述 |
| :--------- | :------------------------------------ |
| `^`     | 匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。 |
| `$`     | 匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。 |
| `\b`     | 匹配一个单词边界，即字与空格间的位置。 |
| `\B`     | 非单词边界匹配。 |

**注**：不能将限定符与定位符一起使用 。

### 限定符

> 用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。

| 特殊字符       | 功能描述 |
| :--------- | :------------------------------------ |
| `*`     | 匹配前面的子表达式零次或多次，等价于 `{0,}`。 |
| `+`     | 匹配前面的子表达式一次或多次，等价于 `{1,}`。 |
| `?`     | 匹配前面的子表达式零次或一次，等价于 `{0,1}`。 |
| `{n}`     | n 是一个非负整数。匹配确定的 n 次。 |
| `{n,}`     | n 是一个非负整数。至少匹配n 次。 |
| `{n,m}`     | m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。 |

**注**：`*`、`+` 限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个 `?` 就可以实现非贪婪或最小匹配。

### 非打印字符

> 非打印字符也可以是正则表达式的组成部分。

| 特殊字符       | 功能描述 |
| :--------- | :------------------------------------ |
| `\cx`     | 匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。 |
| `\f`     | 匹配一个换页符。等价于 \x0c 和 \cL。 |
| `\n`     | 匹配一个换行符。等价于 \x0a 和 \cJ。 |
| `\r`     | 匹配一个回车符。等价于 \x0d 和 \cM。 |
| `\s`     | 匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。 |
| `\S`     | 匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。 |
| `\t`     | 匹配一个制表符。等价于 \x09 和 \cI。 |
| `\v`     | 匹配一个垂直制表符。等价于 \x0b 和 \cK。 |

## 正则表达式常用方法

### test()

> 返回正则表达式匹配的结果；
> 如果匹配以数组形式返回，不匹配返回`null`。

```js
let reg = /^a/; //^ 以给定的代码开头
let str1 = 'abc123'
let str2 = '123abc'

console.log(reg.test(str1)) // true
console.log(reg.test(str2)) // false
```

### exea()

> 返回正则表达式匹配的结果；
> 如果匹配以数组形式返回，不匹配返回`null`。

```js
let reg = /^a/; //^ 以给定的代码开头
let str1 = 'abc123'
let str2 = '123abc'

console.log(reg.exec(str1)); // ["a", index: 0, input: "abc123", groups: undefined]
console.log(reg.exec(str2)); // `null`
```

## 和正则表达式结合的方法

### replace()

> 属于字符串方法；
> 根据给定的正则规则将匹配结果替换为指定值。

```js
/**
 * 应用：将中划线链接的字符串转化为小驼峰式
 * 'get-element-by-id' => 'getElementById'
 */

let str = 'get-element-by-id';
let reg = /-\w/g;

str.replace(reg, function($) {
  console.log($);
  return $.slice(1).toUpperCase();
}); //第一个是规则，第二个是要替换的内容
```

本节完。
